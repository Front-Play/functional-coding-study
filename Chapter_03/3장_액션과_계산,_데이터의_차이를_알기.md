# 액션과 계산, 데이터의 차이를 알기

일상에서 장보기에 대입해서 생각을 해보자

| 액션 | 냉장고 확인하기 |
| --- | --- |
| 액션 | 운전해서 상점으로 가기 |
| 액션 | 필요한 것 구입하기 |
| 액션 | 운전해서 집으로 오기 |

언뜻 보면 다 액션같아 보이지만 데이터와 계산은 숨어 있다.

| 액션 | 계산 | 데이터 |
| --- | --- | --- |
| 냉장고 확인하기 |  | 현재 재고 |
| 운전해서 상점으로 가기 |  |  |
|  |  | 필요한 재고 |
|  | 재고 빼기 | 장보기 목록 |
| 필요한 것 구입하기 |  |  |
| 운전해서 집으로 오기 |  |  |

## 정리

1. 액션과 계산, 데이터는 어디에나 적용할 수 있다
2. 액션 안에는 계산과 데이터, 또 다른 액션이 숨어 있을 수 있다.
3. 계산은 더 작은 계산과 데이터로 나누고 연결할 수 있다.
4. 데이터는 데이터만 조합할 수 있다.
5. 계산은 때로 우리 머릿속에서 일어난다. 

## 함수형 프로그래밍의 일반적인 구현 순서

- 데이터 → 계산→ 액션

## 액션은 코드 전체로 퍼진다

```jsx
function figurePayout(affiliate){
	var owed = affiliate.sales * affiliate.commission;
	if(owed > 100)
		sendPayout (affiliate.bank_code, owed);
}

function affiliatePayout() {
	var affiliates = fetchAffiliates();
	for (var a = 0; a< affiliate.lengjth; a++)
			figurePayout (affiliates[a]);
}

function main() {
	affiliatePayout();
}
```

## 액션은 다양한 형태로 나타냅니다

- 함수 호출
- 메서드 호출
- 생성자
- 표현식
- 상태

---

## 데이터에 대해 자세히 알아보기

### 데이터란?

이벤트에 대한 사실

### 데이터를 어떻게 구현하나?

자바스크립트에서는 기본 데이터 타입으로 구현한다.

### 어떻게 데이터에 의미를 담을 수 있나?

데이터 구조로 의미를 담을 수 있다. 목록의 순서가 중요하다면 순서를 보장하는 데이터 구조를 사용하면 된다.

### 불변성

함수형 프로그래머는 불변 데이터 구조를 만들기 위해 두 가지 원칙을 사용한다.

1. 카피 온 라이트 : 복사할 때 복사본 만들기
2. 방어적 복사 : 보관하려고 하는 데이터의 복사본 만들기

### 데이터의 장점

데이터는 데이터 그 자체로 할 수 있는게 없다.

1. 직렬화
    - 직렬화된 액션과 계산은 다른 곳에서 잘 동작할 것이라는 보장이 없음
    - 하지만 직렬화된 데이터는 전송하거나 디스크에 저장했다가 읽기 쉬움
2. 동일성 비교
    - 계산이나 액션은 서로 비교하기 어렵지만 데이터는 쉬움
3. 자유로운 해석
    - 여러 가지 방법으로 해석 가능하다(접속 로그, 모니터링에 동일 데이터 사용가능)

### 데이터 단점

해석이 반드시 필요하다

---

## 계산에 대해 자세히 알아보기

### 계산은 무엇인가?

- 입력값으로 출력값을 만드는 것
- 실행 시점과 횟수에 관계없이 항상 같은 입력값에 대해 같은 출력값을 줌

### 계산은 어떻게 구현하나?

- 계산은 함수로 구현함

### 어떻게 계산에 의미를 담을 수 있나?

- 계산에는 연산을 담을 수 있음
- 언제 사용할지 또는 어떻게 사용할지에 따라 다름

### 왜 액션보다 좋나요?

1. 테스트 하기 쉬움
2. 분석이 쉬움 → 정적 분석에서 자동화된 분석은 중요함
3. 조합하기 좋음 → 조합해서 더 큰 계산으로

### 계산을 쓰면서 걱정하지 않아도 되는 것(feat.액션)

1. 동시에 실행되는 것
2. 과거 실행되었던 것이나 미래에 실행할 것 
3. 실행 횟수

### 계산의 단점

액션을 실행하기 전에 어떤 일이 발생할 지 알 수 없음

---

## 액션에 대해 자세히 알아보기

### 액션은 무엇인가?

외부 세계에 영향을 주거나 받는 것을 말함

실행 시점과 횟수에 의존함

- 언제 실행되는지 - 순서
- 얼마나 실행되는지 - 반복

### 액션은 어떻게 구현하나요?

자바스크립트에서는 함수로 구현함

### 어떻게 액션에 의미를 담을  수 있나요?

액션으로 외부 세상에 영향을 줄 수 있음

따라서 어떤 일을 하려는지 아는 것이 중요함

### 액션은 일반적으로 무엇이라고 하나요?

순수하지 않은 함수, 부수 효과 함수, 부수효과가 있는 함수

### 액션은 쉽지 않다

- 액션은 다루기가 힘듦
- 액션은 우리가 소프트웨어를 실행하려는 가장 중요한 이유

### 액션을 잘 사용하기 위한 방법

1. 가능한 액션을 적게 사용한다
2. 액션은 가능한 작게 만든다. 관련 없는 코드는 모두 제거한다
3. 액션이 외부 세계와 상호작용하는 것을 제한할 수 있음
4. 액션이 호출 시점에 의존하는 것을 제한한다.
